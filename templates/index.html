<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Music Player</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* General body and container styling */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: white;
        }

        .player-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 400px;
            width: 100%;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .player-container:hover {
            transform: translateY(-5px);
        }

        /* Album Art */
        .album-art {
            width: 250px;
            height: 250px;
            border-radius: 20px;
            margin: 0 auto 30px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            position: relative;
            transition: transform 0.3s ease;
        }

        .album-art:hover {
            transform: scale(1.05);
        }

        .album-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        /* Placeholder for playback animation - will not be connected to bot playback status without further updates */
        .album-art.playing img {
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Song Info - Placeholder as bot doesn't send current song info to web */
        .song-info {
            margin-bottom: 30px;
            color: white;
        }

        .song-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .artist-name {
            font-size: 16px;
            opacity: 0.8;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* Progress Bar - Placeholder as bot doesn't send current progress to web */
        .progress-container {
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.2);
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            cursor: pointer;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #feca57);
            border-radius: 3px;
            width: 0%; /* Static for now, no actual progress from bot */
            transition: width 0.3s ease;
        }

        /* Controls */
        .controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .play-pause-btn {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
        }

        .play-pause-btn:hover {
            background: linear-gradient(135deg, #ff5252, #ffca28);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
        }

        .control-icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .play-pause-btn .control-icon {
            width: 32px;
            height: 32px;
        }

        /* Volume Control - Placeholder as bot controls volume directly */
        .volume-container {
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .volume-slider {
            width: 100px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            border: none;
        }

        .volume-icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
            opacity: 0.8;
        }

        /* Authentication Section */
        .auth-container {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .auth-btn, .web-control-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 12px 24px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 12px;
            width: 200px;
            justify-content: center;
            text-decoration: none;
        }

        .auth-btn:hover, .web-control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .discord-btn {
            background: linear-gradient(135deg, #5865f2, #7289da);
            border: 1px solid rgba(88, 101, 242, 0.3);
        }

        .discord-btn:hover {
            background: linear-gradient(135deg, #4752c4, #5b6ecd);
            box-shadow: 0 8px 25px rgba(88, 101, 242, 0.4);
        }

        .spotify-btn {
            background: linear-gradient(135deg, #1db954, #1ed760);
            border: 1px solid rgba(29, 185, 84, 0.3);
        }

        .spotify-btn:hover {
            background: linear-gradient(135deg, #1aa34a, #1bc653);
            box-shadow: 0 8px 25px rgba(29, 185, 84, 0.4);
        }

        .auth-icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 500;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #1db954;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Input and Buttons for Web Controls */
        .web-controls {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .queue-input {
            width: 100%;
            padding: 0.75rem;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.9rem;
            outline: none;
        }

        .queue-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .queue-input:focus {
            background: rgba(255, 255, 255, 0.2);
        }

        .add-queue-btn {
            width: 100%;
            padding: 0.75rem;
            background: rgba(147, 51, 234, 0.8);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-queue-btn:hover {
            background: rgba(147, 51, 234, 1);
            transform: translateY(-2px);
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .control-grid .web-control-btn {
            padding: 0.5rem;
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            width: auto;
        }

        .control-grid .web-control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* Background colors for control buttons */
        .bg-blue-600 { background: #2563eb; }
        .bg-blue-600:hover { background: #1d4ed8; }
        .bg-yellow-600 { background: #d97706; }
        .bg-yellow-600:hover { background: #b45309; }
        .bg-green-600 { background: #16a34a; }
        .bg-green-600:hover { background: #15803d; }
        .bg-indigo-600 { background: #4f46e5; }
        .bg-indigo-600:hover { background: #4338ca; }
        .bg-red-600 { background: #dc2626; }
        .bg-red-600:hover { background: #b91c1c; }
        .bg-gray-600 { background: #4b5563; }
        .bg-gray-600:hover { background: #374151; }

        /* Flash Message styling */
        .flash-messages {
            margin: 0.5rem 0;
        }

        .flash-message {
            padding: 0.75rem;
            margin: 0.5rem 0;
            border-radius: 8px;
            font-size: 0.9rem;
            text-align: center;
            backdrop-filter: blur(10px);
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }

        .flash-message.success { background: rgba(34, 197, 94, 0.8); }
        .flash-message.error { background: rgba(239, 68, 68, 0.8); }
        .flash-message.info { background: rgba(59, 130, 246, 0.8); }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .player-container {
                padding: 30px 20px;
            }
            .album-art {
                width: 200px;
                height: 200px;
            }
            .song-title {
                font-size: 20px;
            }
            .auth-btn, .web-control-btn {
                width: 100%;
                padding: 10px 20px;
                font-size: 13px;
            }
            .controls {
                gap: 10px;
            }
            .control-btn {
                width: 50px;
                height: 50px;
            }
            .play-pause-btn {
                width: 70px;
                height: 70px;
            }
            .control-icon {
                width: 20px;
                height: 20px;
            }
            .play-pause-btn .control-icon {
                width: 28px;
                height: 28px;
            }
            .control-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="player-container">
        <div class="album-art" id="albumArt">
            <img id="coverImage" src="https://placehold.co/400x400/3498db/ffffff?text=No+Music" alt="Album Cover">
        </div>
        
        <div class="song-info">
            <div class="song-title" id="songTitle">Music Player</div>
            <div class="artist-name" id="artistName">Connect to Discord & Spotify</div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <!-- Flash Messages injected by Flask -->
        <div class="flash-messages">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="flash-message {{ category }}">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>

        <!-- The previous, play/pause, next buttons are designed for a local player.
             For controlling the Discord bot, use the Web Controls section below.
             These are kept for visual completeness but are not functional with the bot. -->
        <div class="controls" style="display: none;"> 
            <button class="control-btn" id="prevBtn" title="Previous">
                <svg class="control-icon" viewBox="0 0 24 24">
                    <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                </svg>
            </button>
            
            <button class="control-btn play-pause-btn" id="playPauseBtn" title="Play/Pause">
                <svg class="control-icon" id="playIcon" viewBox="0 0 24 24">
                    <path d="M8 5v14l11-7z"/>
                </svg>
                <svg class="control-icon" id="pauseIcon" viewBox="0 0 24 24" style="display: none;">
                    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                </svg>
            </button>
            
            <button class="control-btn" id="nextBtn" title="Next">
                <svg class="control-icon" viewBox="0 0 24 24">
                    <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                </svg>
            </button>
        </div>
        
        <!-- Volume Control - Placeholder as bot controls volume directly -->
        <div class="volume-container" style="display: none;">
            <svg class="volume-icon" viewBox="0 0 24 24">
                <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
            </svg>
            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="70">
        </div>
        
        <div class="auth-container">
            <button class="auth-btn discord-btn" id="discordLoginBtn">
                <svg class="auth-icon" viewBox="0 0 24 24">
                    <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0188 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"/>
                </svg>
                Login with Discord
            </button>
            
            <button class="auth-btn spotify-btn" id="spotifyLoginBtn">
                <svg class="auth-icon" viewBox="0 0 24 24">
                    <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.6 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"/>
                </svg>
                Connect Spotify
            </button>
            
            <div class="user-info" id="userInfo">
                <div class="status-indicator"></div>
                <span id="userStatus"></span>
            </div>
        </div>

        <div class="web-controls" id="webControls">
            <input type="text" id="queueUrlInput" placeholder="Add YouTube/SoundCloud URL" class="queue-input">
            <button id="addToQueueBtn" class="add-queue-btn">Add to Queue</button>
            
            <div class="control-grid">
                <button id="playControlBtn" class="web-control-btn bg-blue-600">Play</button>
                <button id="pauseControlBtn" class="web-control-btn bg-yellow-600">Pause</button>
                <button id="resumeControlBtn" class="web-control-btn bg-green-600">Resume</button>
                <button id="skipControlBtn" class="web-control-btn bg-indigo-600">Skip</button>
                <button id="stopControlBtn" class="web-control-btn bg-red-600">Stop</button>
                <button id="volumeUpControlBtn" class="web-control-btn bg-gray-600">Vol +</button>
                <button id="volumeDownControlBtn" class="web-control-btn bg-gray-600">Vol -</button>
            </div>
        </div>
    </div>

    <script>
        // DOM elements
        const albumArt = document.getElementById('albumArt');
        const coverImage = document.getElementById('coverImage');
        const songTitle = document.getElementById('songTitle');
        const artistName = document.getElementById('artistName');
        const progressBar = document.getElementById('progressBar'); // Static, not linked to bot playback
        const playPauseBtn = document.getElementById('playPauseBtn'); // Not functional with bot
        const playIcon = document.getElementById('playIcon'); // Not functional with bot
        const pauseIcon = document.getElementById('pauseIcon'); // Not functional with bot
        const prevBtn = document.getElementById('prevBtn'); // Not functional with bot
        const nextBtn = document.getElementById('nextBtn'); // Not functional with bot
        const volumeSlider = document.getElementById('volumeSlider'); // Not functional with bot

        // Auth elements
        const discordLoginBtn = document.getElementById('discordLoginBtn');
        const spotifyLoginBtn = document.getElementById('spotifyLoginBtn');
        const userInfo = document.getElementById('userInfo');
        const userStatus = document.getElementById('userStatus');
        const webControls = document.getElementById('webControls');

        // Control elements
        const queueUrlInput = document.getElementById('queueUrlInput');
        const addToQueueBtn = document.getElementById('addToQueueBtn');
        const playControlBtn = document.getElementById('playControlBtn');
        const pauseControlBtn = document.getElementById('pauseControlBtn');
        const resumeControlBtn = document.getElementById('resumeControlBtn');
        const skipControlBtn = document.getElementById('skipControlBtn');
        const stopControlBtn = document.getElementById('stopControlBtn');
        const volumeUpControlBtn = document.getElementById('volumeUpControlBtn');
        const volumeDownControlBtn = document.getElementById('volumeDownControlBtn');

        // Utility functions for UI updates
        function updateAuthUI(isDiscordLinked, isSpotifyLinked) {
            if (isDiscordLinked) {
                discordLoginBtn.style.display = 'none';
                spotifyLoginBtn.style.display = 'flex'; // Show Spotify link button if Discord is linked
                
                if (isSpotifyLinked) {
                    spotifyLoginBtn.style.display = 'none'; // Hide Spotify button if already linked
                    userInfo.style.display = 'flex'; // Show status
                    userStatus.textContent = 'Discord & Spotify Connected';
                    webControls.style.display = 'flex'; // Show web controls
                } else {
                    userInfo.style.display = 'none'; // Hide status
                    webControls.style.display = 'none'; // Hide web controls
                    userStatus.textContent = 'Discord Connected (Link Spotify)'; // Update status if only Discord is linked
                }
            } else {
                discordLoginBtn.style.display = 'flex'; // Show Discord login button
                spotifyLoginBtn.style.display = 'none'; // Hide Spotify link button
                userInfo.style.display = 'none'; // Hide status
                webControls.style.display = 'none'; // Hide web controls
            }
        }

        // Function to fetch authentication status from Flask backend
        async function fetchAuthStatus() {
            try {
                const response = await fetch('/api/auth_status');
                const data = await response.json();
                updateAuthUI(data.is_discord_linked, data.is_spotify_linked);
            } catch (error) {
                console.error('Error fetching auth status:', error);
                // Fallback to showing Discord login if API fails
                updateAuthUI(false, false);
            }
        }

        // --- Event Listeners ---

        // Discord Login Button
        discordLoginBtn.addEventListener('click', () => {
            window.location.href = "{{ url_for('login_discord') }}";
        });

        // Spotify Login Button
        spotifyLoginBtn.addEventListener('click', async () => {
            try {
                const response = await fetch('/api/discord_user_id');
                const data = await response.json();
                if (data.discord_user_id) {
                    window.location.href = `/login/spotify/${data.discord_user_id}`;
                } else {
                    alert('Please log in with Discord first.');
                }
            } catch (error) {
                console.error('Error fetching Discord user ID:', error);
                alert('Could not initiate Spotify login. Please try logging in with Discord again.');
            }
        });

        // Add to Queue Button
        addToQueueBtn.addEventListener('click', async () => {
            const url = queueUrlInput.value.trim();
            if (url) {
                const formData = new FormData();
                formData.append('url', url);
                try {
                    const response = await fetch('/web_control/add', {
                        method: 'POST',
                        body: formData
                    });
                    // Flask's flash messages handle the UI feedback, but we can clear input
                    if (response.ok) {
                        queueUrlInput.value = ''; // Clear input on success
                    }
                    // No need to parse JSON unless Flask returns JSON specifically for this endpoint.
                    // The Flask response will redirect, so the browser handles flash messages.
                } catch (error) {
                    console.error('Error adding to queue:', error);
                    alert('Failed to add to queue. Please try again.');
                }
            } else {
                alert('Please enter a YouTube or SoundCloud URL.');
            }
        });

        // Web Control Buttons (Play, Pause, Resume, Skip, Stop, Volume Up/Down)
        document.getElementById('playControlBtn').addEventListener('click', () => {
            window.location.href = '/web_control/play';
        });
        document.getElementById('pauseControlBtn').addEventListener('click', () => {
            window.location.href = '/web_control/pause';
        });
        document.getElementById('resumeControlBtn').addEventListener('click', () => {
            window.location.href = '/web_control/resume';
        });
        document.getElementById('skipControlBtn').addEventListener('click', () => {
            window.location.href = '/web_control/skip';
        });
        document.getElementById('stopControlBtn').addEventListener('click', () => {
            window.location.href = '/web_control/stop';
        });
        document.getElementById('volumeUpControlBtn').addEventListener('click', () => {
            window.location.href = '/web_control/volume_up';
        });
        document.getElementById('volumeDownControlBtn').addEventListener('click', () => {
            window.location.href = '/web_control/volume_down';
        });


        // Initial setup on page load
        document.addEventListener('DOMContentLoaded', () => {
            fetchAuthStatus();
            // Remove the default client-side song display and progress bar logic
            // as it's not connected to the bot's playback.
            albumArt.classList.remove('playing'); // Ensure animation is off initially
        });

        // Auto-hide flash messages after a delay
        document.querySelectorAll('.flash-message').forEach(flashDiv => {
            setTimeout(() => {
                flashDiv.style.opacity = '0';
                setTimeout(() => flashDiv.remove(), 500);
            }, 5000);
        });

        // IMPORTANT: The local playback controls (playPauseBtn, prevBtn, nextBtn, volumeSlider)
        // and the progress bar are purely visual and NOT connected to the Discord bot's actual playback.
        // They are part of the original HTML design for a client-side player.
        // To control the Discord bot, use the "Web Controls" section.
        // These elements are hidden with `style="display: none;"` for clarity.
    </script>
</body>
</html>
